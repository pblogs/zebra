<% content_for :breadcrumb do %>
  <ul id="breadcrumb">
    <li><%= link_to 'Dashboard', private_home_path %></li>
    <li>»</li>
    <li><%= link_to 'Time Sheets', private_time_sheets_path %></li>
    <li>»</li>
    <li><%= @page_title %></li>
  </ul>
<% end %>

<div class="span-6 append-1">
  <div id="sidebar">
    <%= render :partial => 'menus/time_sheets_menu', :layout => false %>
  </div>
</div>

<div class="span-17 last">
  <div class="span-6 append-1">
    <table>
      <tr>
        <th colspan="2">Job #<%= @time_sheet.job_id %></td>
      </tr>
      <tr class="even">
        <td>Worked On</td>
        <td class="right"><%= @time_sheet.started_at.strftime("%B %d, %Y") %></td>
      </tr>
      <tr class="odd">
        <td>Created On</td>
        <td class="right"><%= @time_sheet.created_at.strftime("%B %d, %Y") %></td>
      </tr>
      <tr class="even">
        <td>Updated On</td>
        <td class="right"><%= @time_sheet.updated_at.strftime("%B %d, %Y") %></td>
      </tr>
    </table>
  </div>
  
  <div class="span-10 last">
    
  <h3>Comments</h3>
    <p>
      <%= @time_sheet.time_note_category.name %><br>
      <%= @time_sheet.note %>
    </p>
  </div>

  <hr>

  <h3>Tasks</h3>
  <table>
    <tr>
      <th>Time</th>
      <th>Task</th>
    </tr>
  
    <tr>
      <td><%= @time_sheet.started_at.strftime("%H:%M") %></td>
      <td>Clocked In</td>
    </tr>
    
    <% @time_sheet.time_tasks.each do |task| %>
      <tr class="<%= cycle('even', 'odd') %>">
        <td><%= task.happened_at.strftime("%H:%M") %></td>
        <td>
          <%= task.time_task_category.name %>
          <% if task.note %>
            <br>
            <%= task.note %>
          <% end %>
        </td>
      </tr>
    <% end %>

    <tr>
      <td><%= @time_sheet.completed_at.strftime("%H:%M") %></td>
      <td>Clocked Out</td>
    </tr>
    <tr>
      <td colspan="2" class="total">
        Total: <%= @time_sheet.hours %> Hours
      </td>
    </tr>
  </table>
  
  <hr>
  
  <h3>User Time Entries</h3>
  <table>
    <tr>
      <th>User</th>
      <th>Time Adjustment</th>
      <th>Total</th>
    </tr>
    <% @time_entries_total = 0 %>
    <% @time_sheet.time_entries.each do |entry| %>
    <% @time_entries_total += @time_sheet.hours + entry.time %>
      <tr class="<%= cycle('even', 'odd') %>">
        <td><%= entry.user.name %></td>
        <td><%= entry.time %></td>
        <td><%= @time_sheet.hours + entry.time %></td>
      </tr>
    <% end %>
    <tr>
      <td colspan="3" class="total">
        Total: <%= @time_entries_total %> Hours
      </td>
    </tr>
  </table>

</div>









