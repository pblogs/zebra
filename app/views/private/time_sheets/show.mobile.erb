<p><%= link_to "Edit This Time Sheet", edit_private_time_sheet_path(@time_sheet) %></p>
<table>
  <tr>
    <td>Job</td>
    <td>#<%= @time_sheet.job_id %></td>
  </tr>
  <tr>
    <td>Worked On</td>
    <td class="right"><%= @time_sheet.started_at.strftime("%B %d, %Y") %></td>
  </tr>
  <tr>
    <td>Created On</td>
    <td class="right"><%= @time_sheet.created_at.strftime("%B %d, %Y") %></td>
  </tr>
  <tr>
    <td>Updated On</td>
    <td class="right"><%= @time_sheet.updated_at.strftime("%B %d, %Y") %></td>
  </tr>
</table>

<hr />

<h3>Notes</h3>
<p>
  <%= @time_sheet.time_note_category.name %><br />
  <%= @time_sheet.note %>
</p>

<hr />

<h3>Tasks</h3>
<table>

  <tr>
    <td><b><%= @time_sheet.started_at.strftime("%H:%M") %></b></td>
    <td>Clocked In</td>
  </tr>
  
  <% @time_sheet.time_tasks.each do |task| %>
    <tr>
      <td><b><%= task.happened_at.strftime("%H:%M") %></b></td>
      <td>
        <%= task.time_task_category.name %>
        <% if task.note %>
          <br />
          <%= task.note %>
        <% end %>
      </td>
    </tr>
  <% end %>

  <tr>
    <td><b><%= @time_sheet.completed_at.strftime("%H:%M") %></b></td>
    <td>Clocked Out</td>
  </tr>
  <tr>
    <td><b>Total</b></td>
    <td><%= @time_sheet.hours %> Hours</td>
  </tr>
</table>

<hr />

<h3>User Time Entries</h3>
<table>
  <% @time_entries_total = 0 %>
  <% @time_sheet.time_entries.each do |entry| %>
  <% @time_entries_total += @time_sheet.hours + entry.time %>
    <tr class="<%= cycle('even', 'odd') %>">
      <td><b><%= entry.user.name %></b></td>
      <td><%= entry.time %></td>
      <td><%= @time_sheet.hours + entry.time %></td>
    </tr>
  <% end %>
  <tr>
    <td><b>Total</b></td>
    <td colspan="2"><%= @time_entries_total %> Hours</td>
  </tr>
</table>