<p><%= link_to "Edit This Time Sheet", edit_private_time_sheet_path(@time_sheet) %></p>
<table>
  <tr>
    <th colspan="2"><%= job_label(@time_sheet.job) %></th>
  </tr>
  <tr>
    <td>Created On</td>
    <td class="right"><%= @time_sheet.created_at.strftime("%B %d, %Y") %></td>
  </tr>
  <tr>
    <td>Updated On</td>
    <td class="right"><%= @time_sheet.updated_at.strftime("%B %d, %Y") %></td>
  </tr>
  <tr>
    <td>Per Diem</td>
    <td class="right">
      <%= if @time_sheet.per_diem : "$#{@time_sheet.per_diem_rate}" else "No" end -%>
    </td>
  </tr>
  <tr>
    <td>Fuel</td>
    <td class="right">
      <%= if @time_sheet.fuel : "#{@time_sheet.fuel} L" else "-" end -%>
    </td>
  </tr>
  <tr>
    <td>Hotel</td>
    <td class="right">
      <%= if @time_sheet.hotel : "$#{@time_sheet.hotel}" else "-" end -%>
    </td>
  </tr>
</table>

<hr />

<h3>Notes</h3>
<p>
  <%= @time_sheet.time_note_category.name %><br />
  <%= @time_sheet.note %>
</p>

<hr />

<h3>Tasks</h3>
<table>

  <% @time_sheet.time_tasks.each do |task| %>
    <tr>
      <td><b><%= task.happened_at.strftime("%H:%M") %></b></td>
      <td>
        <%= task.time_task_category.name %>
        <% if task.note %>
          <br />
          <%= task.note %>
        <% end %>
      </td>
    </tr>
  <% end %>

  <tr>
    <td>Lunch</td>
    <td><%= @time_sheet.lunch %> Minutes</td>
  </tr>
  <tr>
    <td><b>Total</b></td>
    <td><%= @time_sheet.total_hours %> Hours</td>
  </tr>
</table>

<hr />

<h3>User Time Entries</h3>
<table>
  <tr>
    <th>User</th>
    <th class="right">Clock In</th>
    <th class="right">Clock Out</th>
    <th class="right">S/T</th>
    <th class="right">O/T</th>
    <th class="right">T/T</th>
  </tr>
  <% @time_entries_total = 0 %>
  <% @time_sheet.time_entries.each do |entry| %>
    <tr class="<%= cycle('even', 'odd') %>">
      <td><%= entry.user.name %></td>
      <td class="right"><%= if entry.clock_in : entry.clock_in.strftime('%I:%M %p') else '-' end %></td>
      <td class="right"><%= if entry.clock_out : entry.clock_out.strftime('%I:%M %p') else '-' end %></td>
      <td class="right"><%= if entry.straight_time != 0 : "#{sprintf("%.2f", entry.straight_time)} Hours" else '-' end %></td>
      <td class="right"><%= if entry.over_time != 0 : "#{sprintf("%.2f", entry.over_time)} Hours" else '-' end %></td>
      <td class="right"><%= if entry.hours != 0 : "#{sprintf("%.2f", entry.hours)} Hours" else '-' end %></td>
    </tr>
  <% end %>
</table>